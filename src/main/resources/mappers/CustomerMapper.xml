<?xml version="1.0" encoding="UTF-8"  ?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.solvd.bankapp.mappers.CustomerMapper">
    <select id= "selectCustomerById" resultMap= "com.solvd.bankapp.mappers.CustomerMapper.customerResultMap">
        SELECT c.SSN, c.First_name, c.Last_name, c.Addresses_id, a.House_number, a.Street_name, a.Apt_number, a.City, a.ID,
        ch.account_number, ch.balance, ch.customers_id, ch.date_created, s.account_number as s_account_number, s.balance as s_balance,
        s.customers_id as s_customers_id, s.interest as s_interest
        FROM Customers c
        LEFT JOIN Addresses a
        ON c.Addresses_id = a.Id
        LEFT JOIN Checking_accounts ch
        ON c.ssn = ch.customers_id
        LEFT JOIN Saving_accounts s
        ON c.ssn = s.customers_id
        WHERE c.SSN = #{ssn}
    </select>
    <resultMap id="customerResultMap" type="com.solvd.bankapp.bin.Customer" autoMapping="false">
        <id property="ssn" column="ssn"/>
        <result property="firstName" column="first_name"/>
        <result property="lastName" column ="last_name"/>
        <association property ="address" resultMap="com.solvd.bankapp.mappers.AddressMapper.addressResultMap"/>
        <association property="checkingAccount" resultMap="com.solvd.bankapp.mappers.CheckingMapper.checkingResultMap"/>
        <collection property="savingAccountsList" resultMap="com.solvd.bankapp.mappers.SavingMapper.savingResultMap"/>
    </resultMap>
</mapper>

<!--        private int ssn;-->
<!--        private String firstName;-->
<!--        private String lastName;-->
<!--        -->
<!--        private Address address;-->
<!--        private List<SavingsAccount> savingAccountsList;-->
<!--private List<CreditCardAccount> creditCardAccounts;-->
<!--    private CheckingAccount checkingAccount;-->